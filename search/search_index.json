{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Chaotic Ngine - Chaos for Clouds","text":"<p>Chaotic is a rather simple CLI tool that evaluates a plan, how it will bring chaos in your Cloud environment.</p> <p>Depending on the Cloud API used, it may kill allocations (Hashicorp Nomad), reboot or stop/start virtual machines in your Cloud environment or on premise Proxmox.</p>"},{"location":"#clouds","title":"Clouds","text":"<p>Currently implemented Clouds APIs:</p> <ul> <li>DigitalOcean</li> <li>Vultr</li> <li>Hetzner Cloud</li> <li>Proxmox</li> <li>Apache CloudStack</li> <li>Hashicorp Nomad</li> <li>cloudscale.ch</li> </ul>"},{"location":"install/","title":"Install","text":""},{"location":"install/#python-pypi","title":"Python PyPi","text":"<p>The package is hosted on PyPi</p> <pre><code>pip install chaotic-ngine\n</code></pre>"},{"location":"install/#container-image-repository","title":"Container Image Repository","text":"<p>The image is hosted on ghcr.io</p> <pre><code>docker pull ghcr.io/ngine-io/chaotic:latest\n</code></pre>"},{"location":"running/","title":"Running","text":""},{"location":"running/#chaotic-cli","title":"Chaotic CLI","text":"<pre><code>chatic-ngine -h\n</code></pre> <pre><code>usage: chaotic-ngine [-h] [--periodic] [--interval INTERVAL] [--version] [--config CONFIG]\n\noptions:\n  -h, --help           show this help message and exit\n  --periodic           run periodic\n  --interval INTERVAL  set interval in minutes\n  --version            show version\n  --config CONFIG      use config file\n</code></pre>"},{"location":"running/#run-modes","title":"Run Modes","text":"<p>With no arguments given, Chaotic runs as a \"one shot\" meant to be executed as cron job.</p> <pre><code>chatic-ngine --config my-config.yaml\n</code></pre> <p>Passing <code>--periodic</code> runs it as daemon/service with configurable interval <code>--interval 5</code> in minutes (1 is the default).</p> <pre><code>chatic-ngine --periodic --interval 5 --config my-config.yaml\n</code></pre> <p>Tip</p> <p>The config is re-read on every interval, no need to restart the service after changing the config.</p>"},{"location":"running/#docker-container","title":"Docker / Container","text":"<p>We provide docker images as <code>ghcr.io/ngine-io/chaotic:latest</code>.</p>"},{"location":"running/#one-shot-docker-run","title":"One Shot Docker run","text":"<pre><code>docker run -ti --rm\n-v $PWD/examples/config_nomad.yaml:/app/config.yaml\n-e TZ=Europe/Zurich\n-e NOMAD_ADDR=$NOMAD_ADDR\n--name chaotic-one-shot\nghcr.io/ngine-io/chaotic:latest\n</code></pre>"},{"location":"running/#periodic","title":"Periodic","text":"<pre><code>docker run -ti --rm\n-v $PWD/examples/config_nomad.yaml:/app/config.yaml\n-e TZ=Europe/Zurich\n-e VULTR_API_KEY=$VULTR_API_KEY\n--name chaotic-periodic\nghcr.io/ngine-io/chaotic:latest --periodic --interval 60\n</code></pre>"},{"location":"running/#docker-compose","title":"Docker Compose","text":"<p>A minimal docker compose file would look like:</p> <pre><code>---\nversion: \"3.9\"\nservices:\n  scalr:\n    image: ghcr.io/ngine-io/chaotic:latest\n    command: --periodic\n    environment:\n      - CHAOTIC_INTERVAL=60\n      - CHAOTIC_LOG_LEVEL=INFO\n      - CHAOTIC_CONFIG=/app/config.yml\n      # Cloud specifc ENV vars for auth\n      - VULTR_API_KEY=...\n    volumes:\n      - \"./vultr-config.yml:/app/config.yml:ro\"\n</code></pre>"},{"location":"settings/","title":"Common Settings","text":""},{"location":"settings/#common-env-variables","title":"Common ENV variables","text":"<p>Log Level (default: info)</p> <pre><code>CHAOTIC_LOG_LEVEL=INFO\n</code></pre> <p>Cloud config to use, (also see examples/ in GitHub repo for samples) (default: ./config.yaml)</p> <pre><code>CHAOTIC_CONFIG=./my-config.yaml\n</code></pre> <p>If <code>--periodic</code> the interval in minues can be given by ENV or <code>--interval</code> (default: 1)</p> <pre><code>CHAOTIC_INTERVAL=60\n</code></pre> <p>Tip: .env file</p> <p>Settings can be set either by ENV vars or by providing a <code>.env</code> file</p>"},{"location":"settings/#common-configs","title":"Common Configs","text":""},{"location":"settings/#exclude-times","title":"Exclude times","text":"<p>Define times when the bot should not doing real actions (it will run in dry-run though):</p> <pre><code>---\nkind: ...\ndry_run: false\nexcludes:\n  weekdays:\n    - Sun\n    - Sat\n  times_of_day:\n    - 22:00-08:00\n    - 11:00-14:00\n  days_of_year:\n    - Jan01\n    - Apr01\n    - May01\n    - Jul04\n    - Aug01\n    - Dec24\n</code></pre>"},{"location":"configs/cloudscale_ch/","title":"cloudscale.ch Settings","text":"<p>Chaotic will stop a server selected by an optional filter tag and stop/start it with a delay of a configurable time (default 60s).</p>"},{"location":"configs/cloudscale_ch/#env-variables","title":"ENV Variables","text":"<pre><code>CLOUDSCALE_API_TOKEN=&lt;...&gt;\n</code></pre>"},{"location":"configs/cloudscale_ch/#configyml","title":"Config.yml","text":"<pre><code>kind: cloudscale_ch\ndry_run: false\nconfigs:\n  # Optional: filter by tag\n  filter_tag: \"chaos=enabled\"\n</code></pre>"},{"location":"configs/cloudstack/","title":"Apache CloudStack Settings","text":"<p>Chaotic will stop a server selected by an optional filter tag and stop/start it with a delay of a configurable time (default 60s).</p>"},{"location":"configs/cloudstack/#env-variables","title":"ENV Variables","text":"<pre><code>CLOUDSTACK_API_ENDPOINT=https://cloud.example.com/client/api\nCLOUDSTACK_API_KEY=&lt;...&gt;\nCLOUDSTACK_API_SECRET=&lt;...&gt;\n</code></pre>"},{"location":"configs/cloudstack/#configyml","title":"Config.yml","text":"<pre><code>---\nkind: cloudstack\ndry_run: false\nconfigs:\n\n  # Optional, filter tag\n  tag:\n    key: chaos\n    value: enabled\n\n  # Optional: filter by zone ID\n  zoneid: ...\n\n  # Optional: Use project instead of account\n  projectid: ...\n\n  # Optional, 60 seconds is the default\n  wait_before_restart: 60\n</code></pre>"},{"location":"configs/digitalocean/","title":"DigitalOcean Settings","text":"<p>Chaotic will stop a droplet selected by an optional filter tag and stop/start it with a delay of a configurable time (default 60s).</p>"},{"location":"configs/digitalocean/#env-variables","title":"ENV Variables","text":"<pre><code>DIGITALOCEAN_ACCESS_TOKEN=...\n</code></pre>"},{"location":"configs/digitalocean/#configyml","title":"Config.yml","text":"<pre><code>---\nkind: digitalocean\ndry_run: false\nconfigs:\n\n  # Optional droplet tag filter\n  tag: \"chaos:enabled\"\n\n  # Optional, 60 seconds is the default\n  wait_before_restart: 60\n</code></pre>"},{"location":"configs/hetzner/","title":"Hetzner Cloud Settings","text":"<p>Chaotic will stop a server selected by an optional filter label and stop/start it with a delay of a configurable time (default 60s).</p>"},{"location":"configs/hetzner/#env-variables","title":"ENV Variables","text":"<pre><code>HCLOUD_API_TOKEN=...\n</code></pre>"},{"location":"configs/hetzner/#configyml","title":"Config.yml","text":"<pre><code>kind: hcloud\ndry_run: false\nconfigs:\n\n  # Optional server label filter\n  label: \"chaos=enabled\"\n\n  # Optional, 60 seconds is the default\n  wait_before_restart: 60\n</code></pre>"},{"location":"configs/nomad/","title":"Hashicorp Nomad Settings","text":""},{"location":"configs/nomad/#env-variables","title":"ENV Variables","text":"<pre><code>NOMAD_ADDR=http://nomad.example.com:4646\n</code></pre>"},{"location":"configs/nomad/#configyml","title":"Config.yml","text":""},{"location":"configs/nomad/#nomad-job","title":"Nomad Job","text":"<p>Chaotic will send an allocation signal to an allocation in the available namespaces selected by an allow list.</p> <pre><code>---\nkind: nomad\ndry_run: false\nconfigs:\n  experiments:\n    - job\n\n  # Signals to choose from\n  signals:\n    - SIGKILL\n\n  # Optional: namespace allowlist\n  namespace_allowlist:\n    - example-prod\n    - foobar-prod\n\n  # Optional: namespace denylist\n  namespace_denylist:\n    - default\n\n  # Optional: job type skip list\n  job_type_skiplist:\n    - system\n    - batch\n    - sysbatch\n\n  # Optional: job name skip list\n  job_skiplist:\n    - my-job-name\n\n  # Optional: Add a meta tag in your nomad job \"chaotic\" = False to opt-out\n  job_meta_opt_key: chaotic\n</code></pre>"},{"location":"configs/nomad/#nomad-node","title":"Nomad Node","text":"<p>Chaotic will drain a node and set it to be ineligible for some time.</p> <pre><code>---\nkind: nomad\ndry_run: false\nconfigs:\n  experiments:\n    - node\n\n  # Optional: Node drain deadline in seconds, default 10\n  node_drain_deadline_seconds: 15\n\n  # Optional: Skip nodes in these classes\n  node_class_skiplist:\n    - storage\n\n  # Optional: Skip nodes with these names\n  node_skiplist:\n    - node1\n    - node5\n\n  # Optional: Wait for this amount of seconds before set node to be eligible again, default 60\n  node_wait_for: 100\n\n  # Optional: Also drain system jobs, default false\n  node_drain_system_jobs: true\n\n  # Optional: Drain multiple nodes in one run in percent, fallback 1 node\n  node_drain_amount_in_percent: 30\n</code></pre>"},{"location":"configs/proxmox/","title":"Proxmox Settings","text":"<p>Chaotic will stop a VM (qemu and lxc) stop/start it with a delay of a configurable time (default 60s).</p>"},{"location":"configs/proxmox/#env-variables","title":"ENV Variables","text":"<p>Auth using user and password:</p> <pre><code>PROXMOX_API_HOST=pve1.example.com\nPROXMOX_API_USER=root@pam\nPROXMOX_API_PASSWORD=...\n</code></pre> <p>Auth using API token (note the !myTokenName in <code>PROXMOX_API_USER</code>):</p> <pre><code>PROXMOX_API_HOST=pve1.example.com\nPROXMOX_API_USER=api@pam!myTokenName\nPROXMOX_API_TOKEN=...\n</code></pre>"},{"location":"configs/proxmox/#configyml","title":"Config.yml","text":"<pre><code>---\nkind: proxmox\ndry_run: false\nconfigs:\n\n  # Optional: Do not shutdown VMs having a lower uptime in minutes\n  min_uptime: 60\n\n  # Optional: Tag to select VMs for chaos actions\n  filter_tag: chaos-target\n\n  # Optional: Tag to skip VMs from chaos actions, even if they have the filter_tag\n  skip_tag: chaos-skip\n\n  # Optional: Do not shutdown VMs in this name list\n  denylist:\n    - my-single-vm\n\n  # Optional: 60 seconds is the default\n  wait_before_restart: 60\n</code></pre>"},{"location":"configs/vultr/","title":"Vultr Settings","text":"<p>Chaotic will stop a server selected by an optional filter tag and stop/start it with a delay of a configurable time (default 60s).</p>"},{"location":"configs/vultr/#env-variables","title":"ENV Variables","text":"<pre><code>VULTR_API_KEY=\"...\"\n</code></pre>"},{"location":"configs/vultr/#configyml","title":"Config.yml","text":"<pre><code>---\nkind: vultr\ndry_run: true\nconfigs:\n  tag: \"chaos=enabled\"\n</code></pre>"}]}